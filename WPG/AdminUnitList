import java.io.*;
import java.util.List;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Locale;

public class AdminUnitList {
    List<AdminUnit> units = new ArrayList<>();
    HashMap<AdminUnit, Long> mapa = new HashMap<>();
    public void read(String filename) throws IOException {
        CSVReader reader = new CSVReader(filename,",",true);

        System.out.printf("%s",reader.getColumnLabels());
        System.out.println();


        while(reader.next()) {
            AdminUnit adm = new AdminUnit();

            int adl = reader.isMissing(3)?reader.getInt(3):0;
            String name = reader.get("name");

            double pop = reader.isMissing("population")?reader.getDouble("population"):0;
            double area = reader.isMissing(5)?reader.getDouble(5):1;
            double density = reader.isMissing(6)?reader.getDouble(6):0;
            long parrent = reader.isMissing("parent")?reader.getLong("parent"):0;
            adm.name=name;
            adm.adminLevel=adl;
            adm.population=pop;
            adm.area=area;
            adm.density=density;
            adm.par=parrent;
            mapa.put(adm,parrent);
            units.add(adm);


        }

    }

    void getmap(long key){
        System.out.print(mapa.get(key));
    }
    void list(PrintStream out){
        for (int i=0;i<units.size();i++){
            out.printf(units.toString());
            System.out.println();
        }

    }

    void list(PrintStream out,int offset, int limit ){
        int il=0;
        for (int i=offset;i<units.size();i++) {
            if(il<limit){
                out.printf(units.get(i).toString());
                System.out.println();
            }
            else
            {break;}
            il++;
        }
    }


    AdminUnitList selectByName(String pattern, boolean regex){
        AdminUnitList ret = new AdminUnitList();
        for (int i=0;i<units.size();i++) {
            AdminUnit spr = new AdminUnit();
            spr=units.get(i);
            if(spr.name==pattern){
                ret.units.add(spr);
            }
        }
        // przeiteruj po zawartości units
        // jeżeli nazwa jednostki pasuje do wzorca dodaj do ret
        return ret;
    }

    public static void main(String[] args) throws IOException {
        PrintStream pw = new PrintStream(System.out);
        AdminUnitList lista = new AdminUnitList();
        lista.read("admin-units.csv");
        lista.list(pw,0,10);
        System.out.printf(String.valueOf(lista.mapa));
    }
}

